# ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¿’æ…£ã‚µãƒãƒ¼ãƒˆæ©Ÿèƒ½ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

**æ¦‚è¦**: å­¦ç¿’ç¶™ç¶šç‡ã‚’é«˜ã‚ã‚‹ãŸã‚ã®ç¿’æ…£å½¢æˆã‚µãƒãƒ¼ãƒˆæ©Ÿèƒ½ã®å®Ÿè£…
**ç›®æ¨™**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¶™ç¶šç‡ 30-50% å‘ä¸Š
**æ¨å®šå·¥æ•°**: 1-2é€±é–“

---

## ğŸ“‹ æ©Ÿèƒ½ä»•æ§˜

### 1. **ç¿’æ…£è¿½è·¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     2026å¹´2æœˆ               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ—¥ æœˆ ç« æ°´ æœ¨ é‡‘ åœŸ         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    1  2  3  4  5  6  7     â”‚
â”‚    (âœ“)(âœ“)(âœ—)(âœ“)(âœ“)(âœ—)(âœ“)  â”‚
â”‚    8  9 10 11 12 13 14     â”‚
â”‚    (âœ“)(âœ“)(âœ“)(âœ“)(âœ“)(âœ“)(âœ“)  â”‚ â† 7æ—¥ã‚¹ãƒˆãƒªãƒ¼ã‚¯ï¼
â”‚   15 16 17 18 19 20 21     â”‚
â”‚    (âœ“)(âœ“)(âœ“) â—‹            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å‡¡ä¾‹:
âœ“ = å­¦ç¿’è¨˜éŒ²ã‚ã‚Š
âœ— = å­¦ç¿’ãªã—
â—‹ = ä»Šæ—¥ï¼ˆæœªç¢ºå®šï¼‰
```

**è¡¨ç¤ºå†…å®¹:**
- æœˆå˜ä½ã§ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º
- æ—¥ä»˜ã‚’ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°è¡¨ç¤º
- ç¾åœ¨ã®é€£ç¶šè¨˜éŒ²ï¼ˆã‚¹ãƒˆãƒªãƒ¼ã‚¯ï¼‰
- æœ€é•·ã‚¹ãƒˆãƒªãƒ¼ã‚¯è¨˜éŒ²

---

### 2. **å­¦ç¿’çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**

#### ç”»é¢ã‚¤ãƒ¡ãƒ¼ã‚¸:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š å­¦ç¿’çµ±è¨ˆ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  ğŸ“Œ ä»Šæœˆã®æˆç¸¾                       â”‚
â”‚  â”œâ”€ ç´¯è¨ˆå­¦ç¿’æ™‚é–“: 42æ™‚é–“ 15åˆ†       â”‚
â”‚  â”œâ”€ å­¦ç¿’æ—¥æ•°: 18æ—¥                  â”‚
â”‚  â””â”€ ç›®æ¨™é”æˆç‡: 85%                â”‚
â”‚                                      â”‚
â”‚  ğŸ”¥ ç¾åœ¨ã®ã‚¹ãƒˆãƒªãƒ¼ã‚¯                â”‚
â”‚  â”œâ”€ é€£ç¶šè¨˜éŒ²: 7æ—¥é–“                 â”‚
â”‚  â”œâ”€ æœ€é•·è¨˜éŒ²: 21æ—¥é–“               â”‚
â”‚  â””â”€ æœ¬æ—¥ã®å­¦ç¿’: âœ“ å®Œäº†              â”‚
â”‚                                      â”‚
â”‚  â±ï¸ å­¦ç¿’æ™‚é–“çµ±è¨ˆ                    â”‚
â”‚  â”œâ”€ 1æ—¥å¹³å‡: 2æ™‚é–“ 20åˆ†            â”‚
â”‚  â”œâ”€ æœ€é•·: 3æ™‚é–“ 45åˆ†ï¼ˆ2/12ï¼‰       â”‚
â”‚  â””â”€ æœ€çŸ­: 45åˆ†ï¼ˆ2/3ï¼‰              â”‚
â”‚                                      â”‚
â”‚  ğŸ† ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³                  â”‚
â”‚  â”œâ”€ â­ 7æ—¥ã‚¹ãƒˆãƒªãƒ¼ã‚¯: 2026/2/17    â”‚
â”‚  â”œâ”€ â­ 100æ™‚é–“é”æˆ: 2026/2/5       â”‚
â”‚  â””â”€ â­ é€£ç¶š30æ—¥é”æˆ: ????          â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. **ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€šçŸ¥**

#### æ©Ÿèƒ½:
- **ã‚¿ã‚¤ãƒ—åˆ¥é€šçŸ¥:**
  - ğŸ“ æ™‚é–“æŒ‡å®šå‹: "æ¯æ—¥ 19:00 ã«å­¦ç¿’ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼"
  - ğŸ“± ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥: ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥
  - ğŸ“§ ãƒ¡ãƒ¼ãƒ«é€šçŸ¥: ãƒ¡ãƒ¼ãƒ«ã§ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼

#### è¨­å®šUI:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”” ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®š         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚ â˜‘ é€šçŸ¥ã‚’æœ‰åŠ¹ã«ã™ã‚‹         â”‚
â”‚                             â”‚
â”‚ é€šçŸ¥ã‚¿ã‚¤ãƒ—:                 â”‚
â”‚ â—‹ ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ï¼ˆæ¨å¥¨ï¼‰     â”‚
â”‚ â—‹ ãƒ¡ãƒ¼ãƒ«é€šçŸ¥               â”‚
â”‚ â—‹ ä¸¡æ–¹                     â”‚
â”‚                             â”‚
â”‚ é€šçŸ¥æ™‚åˆ»:                   â”‚
â”‚ [v] 19:00 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                             â”‚
â”‚ é€šçŸ¥æ›œæ—¥:                   â”‚
â”‚ â˜‘ æœˆ â˜‘ ç« â˜‘ æ°´ â˜‘ æœ¨      â”‚
â”‚ â˜‘ é‡‘ â–¡ åœŸ â–¡ æ—¥            â”‚
â”‚                             â”‚
â”‚ [ä¿å­˜] [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. **ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³é”æˆè¡¨ç¤º**

```
ç›®æ¨™è¨­å®šä¾‹:
- 7æ—¥é€£ç¶šå­¦ç¿’ âœ“ é”æˆï¼ (2026/2/17)
- 14æ—¥é€£ç¶šå­¦ç¿’ â³ ã‚ã¨7æ—¥
- 30æ—¥é€£ç¶šå­¦ç¿’ â³ ã‚ã¨24æ—¥
- 100æ™‚é–“é”æˆ âœ“ é”æˆï¼ (2026/2/5)
- 200æ™‚é–“é”æˆ â³ æ®‹ã‚Š 58æ™‚é–“
```

---

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

### æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«: `habit_tracking`

```sql
CREATE TABLE habit_tracking (
  id BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  date DATE NOT NULL,
  streak_count INT DEFAULT 0,
  is_completed BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT now(),
  UNIQUE(user_id, date)
);

CREATE INDEX idx_habit_tracking_user_date 
  ON habit_tracking(user_id, date DESC);
```

### ãƒ†ãƒ¼ãƒ–ãƒ«: `user_settings` (æ‹¡å¼µ)

```sql
ALTER TABLE user_settings ADD COLUMN (
  reminder_enabled BOOLEAN DEFAULT TRUE,
  reminder_time TIME DEFAULT '19:00',
  reminder_type TEXT DEFAULT 'push', -- 'push', 'email', 'both'
  reminder_days TEXT DEFAULT 'Mon,Tue,Wed,Thu,Fri', -- JSON or CSV
  updated_at TIMESTAMP DEFAULT now()
);
```

### ãƒ†ãƒ¼ãƒ–ãƒ«: `milestones`

```sql
CREATE TABLE milestones (
  id BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  user_id UUID NOT NULL REFERENCES auth.users(id),
  milestone_type TEXT NOT NULL, -- 'streak_7', 'streak_30', 'hours_100', 'hours_200'
  achieved_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT now(),
  UNIQUE(user_id, milestone_type)
);
```

---

## ğŸ—ï¸ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ :

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ HabitCalendar.tsx          # ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º
â”‚   â”œâ”€â”€ HabitStats.tsx             # çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ MilestonesList.tsx         # ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ä¸€è¦§
â”‚   â”œâ”€â”€ ReminderSettings.tsx       # ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®š
â”‚   â””â”€â”€ StreakCounter.tsx          # ã‚¹ãƒˆãƒªãƒ¼ã‚¯è¡¨ç¤º
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useHabitTracking.ts       # ç¿’æ…£ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ useStreakCalculation.ts   # ã‚¹ãƒˆãƒªãƒ¼ã‚¯è¨ˆç®—
â”‚   â””â”€â”€ useNotifications.ts       # é€šçŸ¥ãƒ­ã‚¸ãƒƒã‚¯
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ habitUtils.ts            # ç¿’æ…£è¨ˆç®—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ streakCalculations.ts    # ã‚¹ãƒˆãƒªãƒ¼ã‚¯è¨ˆç®—é–¢æ•°
â”‚   â””â”€â”€ notificationService.ts   # é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹
â”‚
â””â”€â”€ __tests__/
    â”œâ”€â”€ habitTracking.test.ts
    â”œâ”€â”€ streakCalculations.test.ts
    â””â”€â”€ notificationService.test.ts
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»•æ§˜:

#### **HabitCalendar.tsx**
```typescript
interface HabitCalendarProps {
  month: Date;
  userId: string;
  data: HabitRecord[];
  onDateClick: (date: Date) => void;
}

// æ©Ÿèƒ½:
// - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
// - ã‚»ãƒ«è‰²åˆ†ã‘ï¼ˆâœ“/âœ—/â—‹ï¼‰
// - æœˆç§»å‹•ï¼ˆå‰æœˆ/æ¬¡æœˆï¼‰
// - æ—¥ä»˜ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°è¡¨ç¤º
```

#### **HabitStats.tsx**
```typescript
interface HabitStatsProps {
  userId: string;
  currentMonth: Date;
}

// è¡¨ç¤ºå†…å®¹:
// - ç´¯è¨ˆå­¦ç¿’æ™‚é–“ï¼ˆå½“æœˆï¼‰
// - å­¦ç¿’æ—¥æ•°ï¼ˆå½“æœˆï¼‰
// - ç›®æ¨™é”æˆç‡
// - ç¾åœ¨ã®ã‚¹ãƒˆãƒªãƒ¼ã‚¯
// - æœ€é•·ã‚¹ãƒˆãƒªãƒ¼ã‚¯
// - 1æ—¥å¹³å‡å­¦ç¿’æ™‚é–“
```

#### **ReminderSettings.tsx**
```typescript
interface ReminderSettingsProps {
  userId: string;
  onSave: (settings: ReminderConfig) => Promise<void>;
}

interface ReminderConfig {
  enabled: boolean;
  time: string; // "HH:mm"
  type: 'push' | 'email' | 'both';
  days: string[]; // ["Mon", "Tue", ...]
}
```

---

## ğŸ”Œ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¨­è¨ˆ

### 1. **GET /api/habit-tracking**
```
ç›®çš„: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¿’æ…£ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
  - year: 2026
  - month: 2
ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
{
  data: [
    { date: "2026-02-01", isCompleted: true, duration: 120 },
    { date: "2026-02-02", isCompleted: true, duration: 90 },
    ...
  ],
  currentStreak: 7,
  maxStreak: 21,
  monthlyStats: {
    totalHours: 42.25,
    completedDays: 18,
    goalAchievementRate: 85
  }
}
```

### 2. **POST /api/habit-tracking**
```
ç›®çš„: ç¿’æ…£è¨˜éŒ²ã‚’ä½œæˆ/æ›´æ–°
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
{
  date: "2026-02-17",
  isCompleted: true,
  duration: 120 // åˆ†å˜ä½
}
ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
{
  id: 123,
  date: "2026-02-17",
  currentStreak: 7,
  milestoneUnlocked: "streak_7" // null ã¾ãŸã¯é”æˆãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³
}
```

### 3. **GET /api/milestones**
```
ç›®çš„: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³å–å¾—
ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
{
  achieved: [
    { type: "streak_7", achievedAt: "2026-02-17" },
    { type: "hours_100", achievedAt: "2026-02-05" }
  ],
  pending: [
    { type: "streak_30", progress: 7, target: 30 },
    { type: "hours_200", progress: 142.25, target: 200 }
  ]
}
```

### 4. **PUT /api/reminder-settings**
```
ç›®çš„: ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®šã‚’æ›´æ–°
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
{
  enabled: true,
  time: "19:00",
  type: "push",
  days: ["Mon", "Tue", "Wed", "Thu", "Fri"]
}
```

### 5. **POST /api/send-reminder**
```
ç›®çš„: ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€šçŸ¥é€ä¿¡ï¼ˆå†…éƒ¨ç”¨ï¼‰
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
{
  userId: "uuid",
  type: "push" | "email"
}
```

---

## ğŸ¯ å®Ÿè£…æ‰‹é †

### **Phase 1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ + APIï¼ˆ2æ—¥ï¼‰**

- [ ] Supabase ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- [ ] `habit_tracking` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `user_settings` ãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µ
- [ ] `milestones` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…ï¼ˆGET/POST /api/habit-trackingï¼‰
- [ ] ã‚¹ãƒˆãƒªãƒ¼ã‚¯è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- [ ] ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- [ ] API ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆ20+ ãƒ†ã‚¹ãƒˆï¼‰

### **Phase 2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ3æ—¥ï¼‰**

- [ ] `HabitCalendar` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] `HabitStats` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] `MilestonesList` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] `StreakCounter` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] `ReminderSettings` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] CSS/Tailwind ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- [ ] ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆï¼ˆ15+ ãƒ†ã‚¹ãƒˆï¼‰

### **Phase 3: é€šçŸ¥æ©Ÿèƒ½ï¼ˆ2æ—¥ï¼‰**

- [ ] ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã®å®Ÿè£…ï¼ˆWeb Notification APIï¼‰
- [ ] Service Worker çµ±åˆ
- [ ] ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼å®šæ™‚å®Ÿè¡Œï¼ˆCron Job: Cloud Functionsï¼‰
- [ ] ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ
- [ ] é€šçŸ¥ã®é€å—ä¿¡ãƒ†ã‚¹ãƒˆ

### **Phase 4: çµ±åˆãƒ†ã‚¹ãƒˆ + ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆ1æ—¥ï¼‰**

- [ ] E2E ãƒ†ã‚¹ãƒˆè¿½åŠ ï¼ˆ15+ ãƒ†ã‚¹ãƒˆï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒã‚§ãƒƒã‚¯
- [ ] CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ›´æ–°
- [ ] æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤

---

## ğŸ“Š è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯

### ã‚¹ãƒˆãƒªãƒ¼ã‚¯è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ :

```typescript
function calculateStreak(habits: HabitRecord[]): {
  current: number;
  max: number;
} {
  const sorted = habits.sort((a, b) => 
    new Date(b.date) - new Date(a.date)
  );

  let current = 0;
  let max = 0;
  let tempStreak = 0;
  let lastDate = new Date();

  for (const record of sorted) {
    const recordDate = new Date(record.date);
    const dayDiff = Math.floor((lastDate - recordDate) / (1000 * 60 * 60 * 24));

    if (record.isCompleted) {
      if (dayDiff <= 1) {
        tempStreak++;
      } else {
        tempStreak = 1;
      }
      max = Math.max(max, tempStreak);
      current = tempStreak; // æœ€æ–°ã‹ã‚‰é€£ç¶šã—ã¦ã„ã‚‹å ´åˆã®ã¿
    } else {
      tempStreak = 0;
    }

    lastDate = recordDate;
  }

  // ä»Šæ—¥å­¦ç¿’ã—ã¦ã„ãªã„å ´åˆã€ã‚¹ãƒˆãƒªãƒ¼ã‚¯ãƒªã‚»ãƒƒãƒˆ
  const today = new Date().toDateString();
  if (sorted[0]?.date !== today) {
    current = 0;
  }

  return { current, max };
}
```

### ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³æ¤œå‡º:

```typescript
function checkMilestones(
  currentStreak: number,
  totalHours: number,
  previousMilestones: string[]
): string[] {
  const unlocked: string[] = [];

  if (currentStreak === 7 && !previousMilestones.includes('streak_7')) {
    unlocked.push('streak_7');
  }
  if (currentStreak === 14 && !previousMilestones.includes('streak_14')) {
    unlocked.push('streak_14');
  }
  if (currentStreak === 30 && !previousMilestones.includes('streak_30')) {
    unlocked.push('streak_30');
  }
  if (totalHours >= 100 && !previousMilestones.includes('hours_100')) {
    unlocked.push('hours_100');
  }
  if (totalHours >= 200 && !previousMilestones.includes('hours_200')) {
    unlocked.push('hours_200');
  }

  return unlocked;
}
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå¯¾è±¡:
- âœ… ã‚¹ãƒˆãƒªãƒ¼ã‚¯è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ15+ ãƒ†ã‚¹ãƒˆï¼‰
- âœ… ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³æ¤œå‡ºï¼ˆ10+ ãƒ†ã‚¹ãƒˆï¼‰
- âœ… æ—¥ä»˜è¨ˆç®—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆ10+ ãƒ†ã‚¹ãƒˆï¼‰

### çµ±åˆãƒ†ã‚¹ãƒˆå¯¾è±¡:
- âœ… API /habit-tracking (GET/POST/PUT)
- âœ… ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³è‡ªå‹•æ¤œå‡º
- âœ… é€šçŸ¥é€ä¿¡ãƒ­ã‚¸ãƒƒã‚¯

### E2E ãƒ†ã‚¹ãƒˆå¯¾è±¡:
- âœ… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UI æ“ä½œ
- âœ… ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®šä¿å­˜
- âœ… ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³è¡¨ç¤ºç¢ºèª
- âœ… é€šçŸ¥å—ä¿¡ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰

### ãƒ†ã‚¹ãƒˆæ•°è¦‹ç©ã‚‚ã‚Š:
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ: +35ãƒ†ã‚¹ãƒˆ
- çµ±åˆãƒ†ã‚¹ãƒˆ: +15ãƒ†ã‚¹ãƒˆ
- E2E ãƒ†ã‚¹ãƒˆ: +15ãƒ†ã‚¹ãƒˆ
- **åˆè¨ˆ: 294ãƒ†ã‚¹ãƒˆ â†’ 359ãƒ†ã‚¹ãƒˆ**

---

## ğŸ“± UI ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—

### ç¿’æ…£è¿½è·¡ãƒšãƒ¼ã‚¸å…¨ä½“:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å­¦ç¿’é€²æ—ãƒ‘ãƒãƒ«                          â”‚ Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ ğŸ”¥ é€£ç¶šè¨˜éŒ²: 7æ—¥é–“                     â”‚ StreakCounter
â”‚ ğŸ† æœ€é•·: 21æ—¥é–“                        â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2026å¹´2æœˆ [<] [>]          ğŸ”” è¨­å®š     â”‚ ReminderSettings
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚ æ—¥ æœˆ ç« æ°´ æœ¨ é‡‘ åœŸ       â”‚          â”‚
â”‚ â”‚  1  2  3  4  5  6  7     â”‚ HabitCal â”‚
â”‚ â”‚ âœ“  âœ“  âœ—  âœ“  âœ“  âœ—  âœ“     â”‚ endar    â”‚
â”‚ â”‚  8  9 10 11 12 13 14     â”‚          â”‚
â”‚ â”‚ âœ“  âœ“  âœ“  âœ“  âœ“  âœ“  âœ“     â”‚          â”‚
â”‚ â”‚ 15 16 17 18 19 20 21     â”‚          â”‚
â”‚ â”‚ âœ“  âœ“  â—‹  â³             â”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š ä»Šæœˆã®çµ±è¨ˆ                           â”‚ HabitStats
â”‚ â”œâ”€ å­¦ç¿’æ—¥æ•°: 18æ—¥                      â”‚
â”‚ â”œâ”€ ç´¯è¨ˆæ™‚é–“: 42æ™‚é–“ 15åˆ†               â”‚
â”‚ â”œâ”€ 1æ—¥å¹³å‡: 2æ™‚é–“ 20åˆ†                â”‚
â”‚ â””â”€ ç›®æ¨™é”æˆ: 85%                      â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ† ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³                      â”‚ MilestonesList
â”‚ âœ“ 7æ—¥é€£ç¶šé”æˆ (2/17)                  â”‚
â”‚ â³ 30æ—¥é€£ç¶šé”æˆ (7/30)                â”‚
â”‚ âœ“ 100æ™‚é–“é”æˆ (2/5)                  â”‚
â”‚ â³ 200æ™‚é–“é”æˆ (142/200)              â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¨ˆç”»

### GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¿½åŠ :

```yaml
# .github/workflows/habit-features.yml
name: Habit Features Testing

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm install
      - run: npm run test -- habitTracking
      - run: npm run test:e2e habit
```

---

## ğŸ“ˆ æˆåŠŸæŒ‡æ¨™

| æŒ‡æ¨™ | ç›®æ¨™ | æ¸¬å®šæ–¹æ³• |
|------|------|--------|
| **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¶™ç¶šç‡** | +30-50% | æœˆæ¬¡ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•° |
| **å¹³å‡å­¦ç¿’æ—¥æ•°** | 18æ—¥/æœˆä»¥ä¸Š | ç¿’æ…£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |
| **é€šçŸ¥é–‹å°ç‡** | 40%+ | ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ |
| **ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³é”æˆç‡** | 70%+ | Milestones ãƒ†ãƒ¼ãƒ–ãƒ« |
| **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸** | 90%+ | Jest coverage |

---

## ğŸ“š å‚è€ƒè³‡æ–™

- Supabase Real-time: https://supabase.com/docs/guides/realtime
- Web Notification API: https://developer.mozilla.org/en-US/docs/Web/API/notification
- Service Workers: https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API

---

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: Phase 1ï¼ˆDB + APIï¼‰ã®å®Ÿè£…ã‚’é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ
