# ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰                            â”‚
â”‚                                                         â”‚
â”‚                      â–²                                  â”‚
â”‚                     /|\  E2E Tests (ğŸ¯) é‡è¦åº¦: é«˜     â”‚
â”‚                    / | \  - 120 ãƒ†ã‚¹ãƒˆ                 â”‚
â”‚                   /  |  \ - å®Ÿãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ª        â”‚
â”‚                  /   |   \                             â”‚
â”‚                 /â”€â”€â”€â”€â”¼â”€â”€â”€â”€\                            â”‚
â”‚                /     |     \  Integration Tests        â”‚
â”‚               /      |      \ - API Tests (33)         â”‚
â”‚              /       |       \                         â”‚
â”‚             /â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€\                        â”‚
â”‚            /         |         \ Unit Tests (85) é‡è¦åº¦: ä¸­  â”‚
â”‚           /          |          \                      â”‚
â”‚          /â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\                     â”‚
â”‚         /            |            \                    â”‚
â”‚        /             |             \ Unit Tests        â”‚
â”‚       /    Jest      |              \ - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£   â”‚
â”‚      /   (Static)    |               \ - Hooks        â”‚
â”‚     /                |                \               â”‚
â”‚    /â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\              â”‚
â”‚   /                  |                  \              â”‚
â”‚  /   Lint & Type    |     Static Tests   \             â”‚
â”‚ /   Check (30s)     |     Performance,    \            â”‚
â”‚/                    |     Accessibility    \           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”˜          â”‚
                                                         â”‚
        å®Ÿè¡Œæ™‚é–“    è‡ªå‹•åŒ–åº¦    ãƒã‚°æ¤œå‡ºç‡    ä¿å®ˆæ€§      â”‚
        é«˜  ğŸ‘ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€âœ  ä½         â”‚
       çŸ­  ğŸ‘ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€âœ  é•·          â”‚
```

## ãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«åˆ¥æˆ¦ç•¥

### 1ï¸âƒ£ Unit Tests (å˜ä½“ãƒ†ã‚¹ãƒˆ)

**ç›®çš„**: å€‹åˆ¥é–¢æ•°ã®å‹•ä½œç¢ºèª

**æ‹…å½“ãƒ•ã‚¡ã‚¤ãƒ«**:
```
src/__tests__/
â”œâ”€â”€ studyUtils.test.ts    (100% ã‚«ãƒãƒ¬ãƒƒã‚¸, 33 ãƒ†ã‚¹ãƒˆ)
â”œâ”€â”€ apiUtils.test.ts      (86.8% ã‚«ãƒãƒ¬ãƒƒã‚¸, 36 ãƒ†ã‚¹ãƒˆ)  
â”œâ”€â”€ login.test.ts         (13 ãƒ†ã‚¹ãƒˆ)
â”œâ”€â”€ studyLog.test.ts      (16 ãƒ†ã‚¹ãƒˆ)
â””â”€â”€ sample.test.ts        (3 ãƒ†ã‚¹ãƒˆ)
```

**å®Ÿè£…ä¾‹: studyUtils.test.ts**
```typescript
// æ—¥ä»˜ã‚¹ã‚¿ãƒ³ãƒ—ã‹ã‚‰ä»Šé€±ã®åˆè¨ˆã‚’è¨ˆç®—
test('calculateWeekTotal: ä»Šé€±ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åˆè¨ˆã‚’ç²¾ç¢ºã«è¨ˆç®—', () => {
  const thisWeek = {
    'Mon': 120, 'Tue': 150, 'Wed': 0,
    'Thu': 180, 'Fri': 200, 'Sat': 90, 'Sun': 0
  };
  expect(calculateWeekTotal(thisWeek)).toBe(740);
});

// ç„¡åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†
test('calculateWeekTotal: ç„¡åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã‚’0ã§è¿”ã™', () => {
  expect(calculateWeekTotal(null)).toBe(0);
  expect(calculateWeekTotal({})).toBe(0);
});
```

**ãƒ¡ãƒˆãƒªã‚¯ã‚¹**:
- **å®Ÿè¡Œæ™‚é–“**: ã€œ5ç§’
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: avg 90%
- **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³**: ãªã— (ç´”ç²‹é–¢æ•°ãƒ†ã‚¹ãƒˆ)
- **ãƒ¢ãƒƒã‚¯**: æœ€å°é™

### 2ï¸âƒ£ Integration Tests (çµ±åˆãƒ†ã‚¹ãƒˆ)

**ç›®çš„**: API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå…¨ä½“ã®å‹•ä½œç¢ºèª

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `src/__tests__/api.test.ts` (174 ãƒ†ã‚¹ãƒˆ)

**ã‚«ãƒãƒ¬ãƒƒã‚¸**: route.ts 89.61%

**å®Ÿè£…ä¾‹**:
```typescript
// GET /api/study-logs ã®çµ±åˆãƒ†ã‚¹ãƒˆ
test('GET: æ­£å¸¸ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãƒ­ã‚°ã‚’è¿”ã™', async () => {
  // ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—: Supabase ãƒ¢ãƒƒã‚¯
  jest.spyOn(supabaseClient, 'rpc').mockResolvedValue({
    data: [{id: 1, user_id: 'user1', minutes: 120, ...}]
  });

  // å®Ÿè¡Œ: API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
  const req = new Request('http://localhost/api/study-logs', {
    headers: { 'Authorization': 'Bearer valid_token' }
  });
  const res = await GET(req);

  // æ¤œè¨¼
  expect(res.status).toBe(200);
  const data = await res.json();
  expect(data).toHaveLength(1);
});

// GET: èªå¯ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
test('GET: ãƒˆãƒ¼ã‚¯ãƒ³ç„¡ã—ã§401ã‚’è¿”ã™', async () => {
  const req = new Request('http://localhost/api/study-logs');
  const res = await GET(req);
  
  expect(res.status).toBe(401);
});
```

**ãƒ¢ãƒƒã‚¯æˆ¦ç•¥**:
```typescript
jest.mock('@/lib/supabase', () => ({
  supabase: {
    auth: {
      getUser: jest.fn()
    },
    rpc: jest.fn(),
    from: jest.fn()
  }
}));

// å„ãƒ†ã‚¹ãƒˆã§è¿”å´å€¤ã‚’è¨­å®š
const mockUser = { id: 'user123', email: 'test@example.com' };
jest.spyOn(supabase.auth, 'getUser')
  .mockResolvedValue({ data: { user: mockUser } });
```

**ãƒ¡ãƒˆãƒªã‚¯ã‚¹**:
- **å®Ÿè¡Œæ™‚é–“**: ã€œ10ç§’
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: route.ts 89.61%
- **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³**: ã‚ã‚Š (DB ãƒ¢ãƒƒã‚¯)
- **ãƒ¢ãƒƒã‚¯**: ä¸­ç¨‹åº¦

### 3ï¸âƒ£ E2E Tests (ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ)

**ç›®çš„**: å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªã‚’ãƒ†ã‚¹ãƒˆ

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**:
```
e2e/
â”œâ”€â”€ auth-flow.spec.ts      (15 ãƒ†ã‚¹ãƒˆ Ã— 3 ãƒ–ãƒ©ã‚¦ã‚¶ = 45)
â”œâ”€â”€ api-integration.spec.ts (11 ãƒ†ã‚¹ãƒˆ Ã— 3 ãƒ–ãƒ©ã‚¦ã‚¶ = 33)
â””â”€â”€ ui-components.spec.ts  (14 ãƒ†ã‚¹ãƒˆ Ã— 3 ãƒ–ãƒ©ã‚¦ã‚¶ = 42)
```

**ãƒ–ãƒ©ã‚¦ã‚¶ã‚«ãƒãƒ¬ãƒƒã‚¸**: 120 ãƒ†ã‚¹ãƒˆ, 100% åˆæ ¼

**å®Ÿè£…ä¾‹: auth-flow.spec.ts**
```typescript
test('should load login page with email input', async ({ page }) => {
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨ªå•
  await page.goto('/');
  
  // UI ã®å¯è¦–æ€§ç¢ºèª
  await expect(page.locator('text=ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹')).toBeVisible();
  await expect(page.locator('input[type="email"]')).toBeVisible();
  await expect(page.getByRole('button', { name: 'ãƒ¡ãƒ¼ãƒ«ã§ãƒ­ã‚°ã‚¤ãƒ³' }))
    .toBeVisible();
});

test('should handle email submission correctly', async ({ page }) => {
  await page.goto('/');
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³: ãƒ¡ãƒ¼ãƒ«å…¥åŠ›
  const emailInput = page.locator('input[type="email"]');
  await emailInput.fill('test@example.com');
  
  // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
  const submitButton = page.getByRole('button', { name: 'ãƒ¡ãƒ¼ãƒ«ã§ãƒ­ã‚°ã‚¤ãƒ³' });
  await submitButton.click();
  
  // ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç¢ºèª
  page.once('dialog', dialog => dialog.accept());
  
  // å‰¯ä½œç”¨: å…¥åŠ›æ¬„ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹
  await expect(emailInput).toHaveValue('');
});
```

**ãƒ†ã‚¹ãƒˆç’°å¢ƒ**:
```typescript
// playwright.config.ts
export default defineConfig({
  testDir: './e2e',
  
  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
  },
  
  projects: [
    { name: 'chromium', use: devices['Desktop Chrome'] },
    { name: 'firefox', use: devices['Desktop Firefox'] },
    { name: 'webkit', use: devices['Desktop Safari'] },
  ],
  
  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI,
  }
});
```

**ãƒ¡ãƒˆãƒªã‚¯ã‚¹**:
- **å®Ÿè¡Œæ™‚é–“**: ã€œ50ç§’
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼
- **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³**: ãƒªã‚¢ãƒ« (æœ¬å½“ã®ã‚µãƒ¼ãƒãƒ¼)
- **ãƒ¢ãƒƒã‚¯**: ãªã— (å®Ÿãƒ†ã‚¹ãƒˆç’°å¢ƒ)

### 4ï¸âƒ£ Lint & Type Check (é™çš„è§£æ)

**å®Ÿè¡Œ**:
```bash
npm run lint           # ESLint ã®ã¿
tsc --noEmit         # TypeScript å‹ãƒã‚§ãƒƒã‚¯
```

**ãƒã‚§ãƒƒã‚¯é …ç›®**:
```
ESLint:
- Unused variables
- Style issues
- Security concerns
- Best practices

TypeScript:
- Type mismatches
- Missing imports
- Incorrect function calls
```

## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é–‹ç™ºè€…ãŒã‚³ãƒŸãƒƒãƒˆ                       â”‚
â”‚  git commit -m "æ–°æ©Ÿèƒ½: ..."            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Pre-commit Hook (husky)             â”‚
â”‚  - Lint Check (ESLint)                  â”‚
â”‚  - Type Check (tsc)                     â”‚
â”‚  - Prettier Format                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ âœ… Pass
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Local Jest Tests                    â”‚
â”‚  - Unit Tests (ã€œ5ç§’)                   â”‚
â”‚  - Integration (ã€œ10ç§’)                 â”‚
â”‚  - Coverage Report                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ âœ… Pass / âŒ Fail
             â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                     â”‚
  â–¼ Fail                â–¼ Pass
  (ä¿®æ­£)         git push origin
  ä¿®æ­£ â”€â”€â”€â”€â”€â”€â”
  â”‚          â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. GitHub Actions CI (è‡ªå‹•)          â”‚
â”‚  â”œâ”€ Lint & Type (2åˆ†)                â”‚
â”‚  â”œâ”€ Jest Unit Test (5åˆ†)              â”‚
â”‚  â”œâ”€ Jest Integration (10åˆ†)           â”‚
â”‚  â”œâ”€ Playwright E2E (50åˆ†)             â”‚
â”‚  â”œâ”€ Build Test (3åˆ†)                  â”‚
â”‚  â””â”€ Security Scan (optional)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ âœ… All Pass
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Pull Request Ready                 â”‚
â”‚  - ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…æ©Ÿ                  â”‚
â”‚  - ãƒãƒ¼ã‚¸å‰ãƒã‚§ãƒƒã‚¯å®Œäº†                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Approved
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. Deploy to Production               â”‚
â”‚  - Staging æ¤œè¨¼                        â”‚
â”‚  - æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤                        â”‚
â”‚  - Monitoring                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†

### ãƒ‘ã‚¿ãƒ¼ãƒ³ 1: Mock Data (å˜ä½“ & çµ±åˆãƒ†ã‚¹ãƒˆ)

```typescript
// fixtures/api-responses.ts
export const mockStudyLog = {
  id: '123',
  user_id: 'user-abc',
  minutes: 120,
  date: '2026-02-16',
  category: 'JavaScript'
};

export const mockUser = {
  id: 'user-abc',
  email: 'test@example.com',
  aud: 'authenticated'
};
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³ 2: Test Database (E2E ãƒ†ã‚¹ãƒˆ)

```typescript
// e2e/fixtures/setup.ts
import { test as base } from '@playwright/test';

type TestFixtures = {
  authenticatedPage: Page;
};

export const test = base.extend<TestFixtures>({
  authenticatedPage: async ({ page }, use) => {
    // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ­ã‚°ã‚¤ãƒ³
    await page.goto('/login');
    await page.fill('input[type="email"]', 'test@example.com');
    await page.click('button[type="submit"]');
    
    // èªè¨¼çŠ¶æ…‹ã‚’å…±æœ‰
    await use(page);
    
    // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    await page.goto('/logout');
  }
});
```

## ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

| ãƒ•ã‚¡ã‚¤ãƒ« | ç›®æ¨™ | ç¾åœ¨ | å­¦ç¿’ |
|---------|------|------|------|
| route.ts (API) | 80% | 89.61% âœ… | 9.61pt è¶…é |
| page.tsx | 40% | 26.66% | 13.34pt ä¸è¶³ (SSRè¤‡é›‘æ€§) |
| Hooks | 60% | å„ãƒ•ãƒƒã‚¯å¹³å‡ | ã‚«ã‚¹ã‚¿ãƒ ãƒ­ã‚¸ãƒƒã‚¯ |
| Utils | 80% | studyUtils 100% âœ… | å®Œå…¨ã‚«ãƒãƒ¬ãƒƒã‚¸é”æˆ |
| **å…¨ä½“** | **70%** | **44.8%** | **ç¶™ç¶šæ”¹å–„** |

## ãƒ‡ãƒãƒƒã‚° & ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Jest ãƒ†ã‚¹ãƒˆãŒã‚³ã‚±ãŸå ´åˆ

```bash
# å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å®Ÿè¡Œ
npm test -- api.test.ts

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
npm test -- --watch

# ãƒ‡ãƒãƒƒã‚°æƒ…å ±ä»˜ã
npm test -- --verbose

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç¢ºèª
npm run test:coverage
# ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã:
open coverage/lcov-report/index.html
```

### E2E ãƒ†ã‚¹ãƒˆãŒã‚³ã‚±ãŸå ´åˆ

```bash
# 1 ã¤ã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ
npx playwright test -g "should load login page"

# UI ãƒ¢ãƒ¼ãƒ‰ (ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—)
npx playwright test --ui

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
npx playwright test --debug

# å¤±æ•—æ™‚ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆç¢ºèª
npx playwright show-report
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. Arrange-Act-Assert ãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
test('should update study log correctly', () => {
  // Arrange: ãƒ‡ãƒ¼ã‚¿æº–å‚™
  const input = { minutes: 120, category: 'React' };
  
  // Act: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
  const result = updateStudyLog(input);
  
  // Assert: æ¤œè¨¼
  expect(result).toEqual({ ...input, updated_at: expect.any(Date) });
});
```

### 2. DRY (Don't Repeat Yourself)

```typescript
// âŒ æ‚ªã„ä¾‹
test('parse date 1', () => {
  expect(parseDate('2026-02-16')).toEqual(...);
});
test('parse date 2', () => {
  expect(parseDate('2025-01-01')).toEqual(...);
});

// âœ… è‰¯ã„ä¾‹
describe('parseDate', () => {
  test.each([
    ['2026-02-16', new Date(2026, 1, 16)],
    ['2025-01-01', new Date(2025, 0, 1)],
  ])('parses %s correctly', (input, expected) => {
    expect(parseDate(input)).toEqual(expected);
  });
});
```

### 3. é«˜é€Ÿã§ç‹¬ç«‹ã—ãŸãƒ†ã‚¹ãƒˆ

```typescript
// âœ… è‰¯ã„ä¾‹: ç‹¬ç«‹ã€ãƒ¢ãƒƒã‚¯åŒ–
test('fetch logs for user', async () => {
  const mockFetch = jest.fn()
    .mockResolvedValue({ json: () => ({ logs: [] }) });
  
  global.fetch = mockFetch;
  
  const result = await getLogs('user123');
  expect(mockFetch).toHaveBeenCalledWith('/api/logs?user=user123');
});
```

## ãƒ†ã‚¹ãƒˆå ±å‘Šæ›¸ä¾‹

```
Test Session Results
====================
Date: 2026-02-16T15:30:00Z
Duration: 65.3 seconds

Lint & Type Check: âœ… PASS (2s)
- ESLint: 0 errors
- TypeScript: 0 errors

Unit Tests: âœ… PASS (5s)
- Tests: 85 passed
- Coverage: 85% avg

Integration Tests: âœ… PASS (10s)
- Tests: 89 passed  
- route.ts: 89.61% coverage

E2E Tests: âœ… PASS (48.3s)
- Chromium: 40 passed
- Firefox: 40 passed
- WebKit: 40 passed
- Total: 120 passed

Build: âœ… PASS (3s)
- Output size: 45 MB
- No warnings

Overall: âœ… ALL PASS
Ready for deployment âœ…
```
